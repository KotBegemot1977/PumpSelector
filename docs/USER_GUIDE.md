# User Guide: Tab-by-Tab Logic

## 1. Вкладка: ОЦИФРОВКА (Digitizer)
Этот модуль предназначен для перевода бумажных или отсканированных графиков в цифровой вид.

### Логика работы:
*   **Загрузка**: Выберите файл изображения. Сетка отображается поверх картинки.
*   **Калибровка**: 
    1.  Совместите красные оси с началом координат на картинке.
    2.  Введите значения X-max (Макс. подача) и Y-max (Макс. напор).
    3.  Нажмите **"Зафиксировать оси"**. Это заблокирует калибровку и позволит ставить точки.
*   **Снятие точек**: 
    1.  Выберите режим (H, КПД, P2 или NPSH).
    2.  Кликайте по кривой на изображении. Точки автоматически привязываются к сетке.
    3.  **Прицел**: Для точности центр сетки служит неподвижным «снайперским прицелом».
*   **Перенос данных**: Кнопка **"Перенести в расчет"** отправляет все снятые точки в первую вкладку и автоматически переключает на нее вид.

---

## 2. Вкладка: ПОСТРОЕНИЕ ПО ТОЧКАМ (Points)
Основная рабочая область для ввода данных испытаний.

### Параметры:
*   **Поля ввода**: Текстовые блоки для Q, H, КПД и т.д. Значения разделяются пробелами.
*   **Логика**: При нажатии **"Рассчитать график"** данные отправляются на сервер. Сервер строит полиномы 3-ей степени и возвращает коэффициенты и точность ($R^2$).
*   **Рабочая точка (РТ)**: Система пересекает характеристику насоса с кривой сети ($H = H_{st} + k \cdot Q^2$) и выводит факт. параметры в подвал.
*   **Кнопки**:
    *   **Сохранить в БД**: Создает новую запись в архиве. Если ID не равен "NEW", предлагает обновить старую.
    *   **Скачать PDF**: Генерирует А4-отчет. Если к насосу привязан чертеж, он будет вшит вторым листом.

---

## 3. Вкладка: ПОСТРОЕНИЕ ПО КОЭФФИЦИЕНТАМ (Modes)
Для работы с готовыми паспортными данными.

### Логика работы:
*   **Прямой ввод**: Вы вводите коэффициенты $A_0, A_1, A_2, A_3$ напрямую.
*   **Валидация**: Графики строятся только если коэффициенты не равны нулю.
*   **Синхронизация**: Если вы перешли сюда из вкладки «Точки», коэффициенты будут заполнены автоматически.
*   **Диапазон**: Здесь можно ограничить видимость графика через $Q_{min}$ и $Q_{max}$.

---

## 4. Вкладка: АРХИВ RUSPUMP (Archive)
База данных всех сохраненных насосов.

### Функции:
*   **Поиск и фильтры**: Глобальный поиск по всем полям.
*   **Загрузка данных**: При клике по строке приложение находит запись в памяти и распределяет её по вкладкам.
    *   *Источник "Points"*: Заполняет и точки, и коэффициенты.
    *   *Источник "Coeffs"*: Заполняет только коэффициенты.
*   **Удаление**: Удаляет запись и связанный с ней файл чертежа из хранилища.
*   **Импорт/Экспорт**: Позволяет скачивать всю БД или загружать её из файла (с возможностью слияния).
