# Инструкция по запуску через Docker

Данное приложение упаковано в Docker-контейнер с использованием многоэтапной сборки (Multi-stage build). Это позволяет автоматически собирать фронтенд (Vite) и запускать бэкенд в едином окружении.

## Требования
- Docker
- Docker Compose

## Быстрый запуск

1. **Сборка и запуск**:
   Откройте терминал в корневой директории проекта и выполните:
   ```bash
   docker-compose up --build -d
   ```

2. **Доступ к приложению**:
   После запуска приложение будет доступно по адресу:
   [http://localhost:8000](http://localhost:8000)

## Структура контейнера

- **Порт**: 8000 (используется как для API, так и для раздачи статического фронтенда).
- **Хранилище данных**: Базы данных (`pumps.db`, `sensitive.db`, `drawings.db`) и загруженные чертежи сохраняются в папке `./backend/data` на вашем хосте. Это гарантирует сохранность данных при перезапуске контейнера.

## Полезные команды

- **Остановка проекта**:
  ```bash
  docker-compose down
  ```
- **Просмотр логов**:
  ```bash
  docker-compose logs -f
  ```
- **Сброс данных (Осторожно!)**:
  Для полной очистки удалите папку `./backend/data`.

## Переменные окружения (.env)
Вы можете настроить параметры в файле `.env` в корне проекта. Docker автоматически подхватит их. Основные параметры:
- `DB_DIR`: Путь к базе данных внутри контейнера (рекомендуется оставить `/app/data`).
- `UPLOAD_DIR`: Путь к папке загрузок (рекомендуется оставить `/app/data/uploads`).
